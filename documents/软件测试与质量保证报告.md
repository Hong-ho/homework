# 智能菜谱生成系统  
## 软件测试与质量保证报告

---

## 1. 文档目的

本报告用于描述智能菜谱生成系统的软件测试策略与质量保证措施，确保系统功能正确、接口稳定、性能达标，满足最终用户的使用需求。

---

## 2. 测试目标

- **功能正确性**：各模块行为符合需求说明书
- **接口稳定性**：输入输出一致，异常输入处理健壮
- **性能指标**：响应时间、并发能力符合性能需求
- **用户体验**：界面交互流畅，易用性高
- **可维护性**：代码清晰、结构模块化，易于调试和扩展

---

## 3. 测试类型与覆盖范围

| 测试类型     | 内容示例                                          |
|--------------|--------------------------------------------------|
| 单元测试     | 测试图像生成模块、菜谱结构化模块、历史记录函数  |
| 接口测试     | 测试 `/generate`, `/history` 等 API 的返回与异常 |
| 集成测试     | 完整流程：输入原料 → 生成菜谱 → 展示图片         |
| 前端测试     | 表单输入、响应验证、用户操作流程                 |
| 性能测试     | 多用户并发生成请求、响应时间、系统资源占用       |
| 回归测试     | 每次迭代后验证旧功能不受影响                     |

---

## 4. 测试工具与环境

| 工具        | 用途                         |
|-------------|------------------------------|
| `pytest`    | Python 单元测试框架          |
| `coverage`  | 测试覆盖率检查                |
| `Postman`   | API 接口测试                  |
| `JMeter`    | 并发压力测试                  |
| `Selenium`  | 浏览器自动化操作（可选）      |
| `flake8`    | 代码规范检查                  |

环境：

- Python 3.10+
- Flask / FastAPI 框架
- Windows 10 / Ubuntu 20.04
- Chrome 浏览器

---

## 5. 用例设计示例

### 5.1 菜谱生成用例

| 用例编号 | UC-01 |
|----------|--------|
| 名称     | 输入原料与风格生成菜谱 |
| 前置条件 | 系统正常运行 |
| 输入     | "西红柿,鸡蛋", 风格="家常" |
| 预期输出 | JSON 格式菜谱 + Base64 图像列表 |
| 异常情况 | 输入为空时返回提示信息，不崩溃 |

### 5.2 图像生成用例

| 用例编号 | UC-02 |
|----------|--------|
| 名称     | 步骤图与成品图生成 |
| 输入     | 系统生成的菜谱步骤文本 |
| 预期输出 | 对应每个步骤生成图像，质量清晰 |

---

## 6. 自动化测试集成

### 6.1 测试命令

```bash
pytest --cov=app tests/
```

输出包含详细覆盖率报告。

### 6.2 GitHub Actions 集成测试示例

```yaml
name: Run Tests

on: [push]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - name: Install dependencies
      run: |
        python -m pip install -r requirements.txt
        pip install pytest coverage
    - name: Run tests
      run: |
        pytest --cov=app
```

---

## 7. 缺陷管理与质量保障

### 7.1 缺陷记录与追踪

- 所有 Bug 与优化建议记录在 GitHub Issues
- 每次提交需关联 Issue ID（如 `fix: 修复图像路径 #12`）

### 7.2 质量保障流程

- 所有提交通过单元测试后才能合并至主分支
- 每个功能分支需至少一名成员 Review
- 每周一次回归测试
- 保持测试覆盖率 > 85%

---

## 8. 测试结果汇总（阶段性）

| 测试轮次 | 测试日期   | 主要内容         | Bug 数 | 已解决 | 备注         |
|----------|------------|------------------|--------|--------|--------------|
| 第一次    | 2025-06-10 | 单元 + API 测试   | 3      | 3      | 接口返回修复 |
| 第二次    | 2025-06-12 | 集成 + 前端测试   | 2      | 1      | 提交按钮Bug未复现 |
| 第三次    | 待进行     | 性能 + 压力测试   | -      | -      | -            |

---

## 9. 测试结论与后续建议

- 系统核心功能通过测试，整体稳定
- 生成图像模块需加入超时/降级处理机制
- 建议增加 E2E 自动化测试覆盖用户交互流程
- 定期进行压力测试，确保部署环境可支撑预期用户量

---

**本测试报告将随系统版本持续迭代维护**
