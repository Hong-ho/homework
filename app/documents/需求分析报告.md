# 需求分析报告

本报告详细阐述本项目的建设目标、功能性需求、非功能性需求（性能与可维护性）以及用户需求。内容结合现有代码结构、模块功能及开发环境，具备实际指导意义。

---

## 一、项目背景与目标

随着智能推荐和图像生成技术的发展，个性化的智能菜谱生成系统成为可能。本项目旨在为用户提供基于食材和用户偏好的菜谱自动生成、图像可视化展示以及完整的食谱管理功能。系统整合了文本生成、图像生成、用户登录管理和历史记录，满足用户的多样化需求。

**项目目标：**

- 根据用户输入的食材和偏好生成详细、结构化的菜谱内容。
- 为每道菜谱生成清晰的步骤图像及菜品总图。
- 提供用户注册、登录、收藏与历史记录管理功能。
- 支持离线访问与跨平台使用（PWA）。
- 提供用户偏好学习与个性化推荐能力。

---

## 二、功能性需求

系统整体基于 Flask 框架构建，主要模块分布如下：

### 1. 用户模块（`class_login.py`, `class_user.py`）

- 用户注册与登录（用户名/密码验证）
- 用户收藏夹与历史记录存储（JSON + 本地文件）
- 根据收藏菜谱生成偏好数据，用于个性化推荐
- 用户偏好数据缓存于本地 JSON 文件中

### 2. 食谱生成模块（`class_recipe.py`, `RecipeGenerationPipeline`）

- 根据食材和菜系生成完整的菜谱步骤和材料列表
- 生成菜品命名、外观描述与主图像
- 提供营养分析模块，输出如热量、蛋白质等数据
- 生成 UML 顺序图，展示烹饪步骤流程
- 为每个步骤生成相应图像（支持 PIL 图像）

### 3. 数据持久化与加载

- 所有用户数据存储在 `./data` 文件夹内（如 `user_table.json`、用户独立文件夹）
- 食谱通过 JSON 格式序列化，支持加载回 `Recipe` 对象
- 收藏与历史记录存储目录分离

### 4. 前端与离线支持

- 使用 HTML + CSS + JS 完成前端界面
- 实现 PWA 架构，支持 Service Worker 离线缓存
- 支持移动端与桌面端跨平台访问

---

## 三、性能需求

- **响应时间要求**：在普通设备上生成一份完整菜谱的总响应时间应不超过 5 秒。
- **存储效率**：用户数据使用 JSON 文件保存，避免数据库部署复杂性；每位用户数据量控制在 10MB 内。
- **图像生成效率**：每张图像（主图或步骤图）生成时间不超过 2 秒。
- **并发访问能力**：系统单机支持多个用户同时生成菜谱（受限于 Flask 开发服务器性能，可拓展部署方式）

---

## 四、可维护性需求

### 1. 结构清晰

- 项目代码分为 `classes/` 目录（模块类）、`app.py` 主入口、`data/` 用户数据、`documents/` 文档与依赖说明，层次清晰，便于理解与维护。

### 2. 注释与文档完备

- 所有核心类与方法均已编写 docstring 说明
- 提供完整文档支持，包括：
  - 架构设计文档
  - 软件工程化说明
  - 软件配置与运维计划
  - 团队工作分配报告
  - 本需求分析报告

### 3. 依赖管理

- 所有第三方库写入 `app/documents/requirements.txt`，使用 `pip install -r` 可一键部署
- 使用 Git 进行版本控制，协作开发规范明确

### 4. 可扩展性

- 新增生成模块（如视频、语音讲解）可作为 RecipePipeline 的新阶段添加
- 用户行为分析、AI推荐引擎等功能可进一步扩展用户类 `User` 与个性化逻辑

---

## 五、运行环境需求

- **Python 版本**：3.8 以上
- **依赖库**：Flask、PIL、json、os 等，详见 `requirements.txt`
- **前端运行环境**：现代浏览器（支持 PWA 的 Chrome/Edge/Safari 等）
- **文件结构约定**：
  - 用户数据保存在 `./data` 下，每位用户独立子目录
  - 菜谱数据使用 JSON 读写，避免额外数据库部署

---

## 六、用户需求总结

- **快速生成**：用户只需输入食材即可获得完整菜谱
- **可视化体验**：图文并茂的步骤图和菜品图增强理解与学习
- **个性化推荐**：系统基于用户行为学习偏好，调整生成口味
- **账户支持**：注册、登录、收藏、历史查看等账号功能完备
- **离线使用**：PWA 支持用户在断网环境下仍能查看缓存内容

---

## 七、结语

本项目紧密结合现代 AI 图像与语言技术，注重用户体验与数据可维护性，具备良好的拓展性与工程实现基础。通过团队协作与模块化设计，为构建一个智能、个性化的菜谱系统提供坚实基础。
